
{
  "entities": {
    "Task": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Task",
      "type": "object",
      "description": "Represents a single task or to-do item.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Task entity."
        },
        "name": {
          "type": "string",
          "description": "The name or title of the task."
        },
        "duration_minutes": {
          "type": "number",
          "description": "The estimated or actual duration of the task in minutes."
        },
        "scheduled_time": {
          "type": [
            "string",
            "null"
          ],
          "description": "The time the task is scheduled to start (HH:MM).",
          "format": "time"
        },
        "date": {
          "type": [
            "string",
            "null"
          ],
          "description": "The date the task is scheduled for (YYYY-MM-DD).",
          "format": "date"
        },
        "completed": {
          "type": "boolean",
          "description": "Indicates whether the task has been completed."
        },
        "status": {
          "type": "string",
          "description": "The current status of the task.",
          "enum": [
            "not_started",
            "in_progress",
            "completed",
            "skipped"
          ]
        },
        "type": {
          "type": "string",
          "description": "The type of the task.",
          "enum": [
            "task",
            "flow_task",
            "routine_task"
          ]
        },
        "notes": {
          "type": "string",
          "description": "Additional notes or details about the task."
        },
        "linked_goal_id": {
          "type": [
            "string",
            "null"
          ],
          "description": "Reference to a Goal."
        },
        "linked_flow_id": {
          "type": [
            "string",
            "null"
          ],
          "description": "Reference to a Flow."
        },
        "created_from": {
          "type": "string",
          "description": "Indicates how the task was created.",
          "enum": [
            "voice",
            "manual",
            "flow"
          ]
        },
        "created_at": {
          "type": "string",
          "description": "Timestamp indicating when the task was created.",
          "format": "date-time"
        },
        "updated_at": {
          "type": "string",
          "description": "Timestamp indicating when the task was last updated.",
          "format": "date-time"
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Task)"
        }
      },
      "required": [
        "id",
        "name",
        "completed",
        "status",
        "type",
        "created_at",
        "updated_at",
        "userId"
      ]
    },
    "Flow": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Flow",
      "type": "object",
      "description": "Represents a sequence of tasks.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Flow entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the flow."
        },
        "task_ids": {
          "type": "array",
          "description": "References to Tasks. (Relationship: Flow 1:N Task)",
          "items": {
            "type": "string"
          }
        },
        "estimated_total_duration": {
          "type": "number",
          "description": "The estimated total duration of the flow (calculated from tasks)."
        },
        "linked_goal_id": {
          "type": [
            "string",
            "null"
          ],
          "description": "Reference to a Goal."
        },
        "is_template": {
          "type": "boolean",
          "description": "Indicates whether the flow is a template that can be reused."
        },
        "created_at": {
          "type": "string",
          "description": "Timestamp indicating when the flow was created.",
          "format": "date-time"
        },
        "last_used": {
          "type": [
            "string",
            "null"
          ],
          "description": "Timestamp indicating when the flow was last used.",
          "format": "date-time"
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Flow)"
        }
      },
      "required": [
        "id",
        "name",
        "task_ids",
        "is_template",
        "created_at",
        "userId"
      ]
    },
    "Routine": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Routine",
      "type": "object",
      "description": "Represents a recurring flow scheduled to repeat on a defined schedule.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Routine entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the routine."
        },
        "flow_id": {
          "type": "string",
          "description": "Reference to Flow. (Relationship: Routine 1:1 Flow)"
        },
        "schedule": {
          "type": "object",
          "description": "JSON object for the schedule.",
          "properties": {
            "frequency": {
              "type": "string",
              "enum": [
                "daily",
                "weekly",
                "custom"
              ]
            },
            "days_of_week": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "time_of_day": {
              "type": "string",
              "format": "time"
            },
            "custom_pattern": {
              "type": "string"
            }
          }
        },
        "active": {
          "type": "boolean",
          "description": "Indicates whether the routine is currently active."
        },
        "streak_count": {
          "type": "number",
          "description": "The number of consecutive times the routine has been completed."
        },
        "completion_rate": {
          "type": "number",
          "description": "The percentage of times the routine has been completed."
        },
        "linked_goal_id": {
          "type": [
            "string",
            "null"
          ],
          "description": "Reference to a Goal."
        },
        "next_scheduled": {
          "type": "string",
          "description": "Timestamp indicating when the routine is next scheduled to run.",
          "format": "date-time"
        },
        "created_at": {
          "type": "string",
          "description": "Timestamp indicating when the routine was created.",
          "format": "date-time"
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Routine)"
        }
      },
      "required": [
        "id",
        "name",
        "flow_id",
        "schedule",
        "active",
        "created_at",
        "userId"
      ]
    },
    "Goal": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Goal",
      "type": "object",
      "description": "Represents a long-term objective.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Goal entity."
        },
        "name": {
          "type": "string",
          "description": "The name or title of the goal."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the goal."
        },
        "startDate": {
          "type": "string",
          "description": "The date when the goal was started.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "The target date for achieving the goal.",
          "format": "date-time"
        },
        "progress": {
          "type": "number",
          "description": "The current progress towards the goal (percentage).",
          "format": "number"
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Goal)"
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "startDate",
        "endDate",
        "progress",
        "userId"
      ]
    },
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User Profile",
      "type": "object",
      "description": "Represents a user's profile information.",
      "properties": {
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "photoURL": {
          "type": "string",
          "description": "URL of the user's profile picture.",
          "format": "uri"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the profile was created."
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the profile was last updated."
        }
      },
      "required": [
        "displayName"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/entities/UserProfile"
          },
          "description": "Stores user profile information."
        }
      },
      {
        "path": "users/{userId}/tasks/{taskId}",
        "definition": {
          "entityName": "Task",
          "schema": {
            "$ref": "#/entities/Task"
          },
          "description": "Stores tasks for a specific user."
        }
      },
      {
        "path": "users/{userId}/flows/{flowId}",
        "definition": {
          "entityName": "Flow",
          "schema": {
            "$ref": "#/entities/Flow"
          },
          "description": "Stores flows for a specific user."
        }
      },
      {
        "path": "users/{userId}/routines/{routineId}",
        "definition": {
          "entityName": "Routine",
          "schema": {
            "$ref": "#/entities/Routine"
          },
          "description": "Stores routines for a specific user."
        }
      }
    ]
  }
}
